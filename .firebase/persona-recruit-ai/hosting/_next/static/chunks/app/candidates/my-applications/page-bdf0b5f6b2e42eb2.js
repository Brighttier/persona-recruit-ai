(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7596],{82774:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(95155),l=t(12115),i=t(66681),c=t(66695),r=t(26126),n=t(30285),d=t(17313),o=t(62523),m=t(37648),x=t(17607),u=t(94063),h=t(24371),p=t(8376),j=t(11133),v=t(50172),N=t(57082),f=t(75074),w=t(9572),g=t(83662),b=t(88390),y=t(45481);function A(){let{user:e}=(0,i.A)(),[s,t]=(0,l.useState)([]),[A,_]=(0,l.useState)(""),[L,k]=(0,l.useState)("all"),[C,T]=(0,l.useState)(!0),[S,E]=(0,l.useState)(null);(0,l.useEffect)(()=>{!async function(){if(null==e?void 0:e.id)try{let s=await fetch("/api/applications?candidateId=".concat(e.id));if(!s.ok)throw Error("Failed to fetch applications");let a=(await s.json()).data.map(e=>({id:e.id,jobId:e.jobId,jobTitle:e.jobTitle||"Unknown Position",company:e.companyName||"Unknown Company",companyLogo:"/company-placeholder.png",location:e.location||"Not specified",salary:e.salary||"Not disclosed",appliedAt:e.appliedAt||e.createdAt,status:e.status||"submitted",applicationMethod:e.coverLetter?"full_application":"quick_apply",lastActivity:e.updatedAt||e.appliedAt||e.createdAt,interviews:e.interviews||[],coverNote:e.coverLetter}));t(a)}catch(e){E(e instanceof Error?e.message:"An error occurred")}finally{T(!1)}}()},[null==e?void 0:e.id]);let Z=s.filter(e=>{let s=e.jobTitle.toLowerCase().includes(A.toLowerCase())||e.company.toLowerCase().includes(A.toLowerCase());return"all"===L?s:"active"===L?s&&["submitted","under_review","interview_scheduled"].includes(e.status):"archived"===L?s&&["rejected","offer"].includes(e.status):s}),R=e=>{switch(e){case"submitted":return(0,a.jsx)(m.A,{className:"h-4 w-4"});case"under_review":return(0,a.jsx)(x.A,{className:"h-4 w-4"});case"interview_scheduled":return(0,a.jsx)(u.A,{className:"h-4 w-4"});case"rejected":return(0,a.jsx)(h.A,{className:"h-4 w-4"});case"offer":return(0,a.jsx)(p.A,{className:"h-4 w-4"});default:return(0,a.jsx)(j.A,{className:"h-4 w-4"})}},W=e=>{switch(e){case"submitted":default:return"secondary";case"under_review":case"offer":return"default";case"interview_scheduled":return"outline";case"rejected":return"destructive"}},D=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),I=s.filter(e=>["submitted","under_review","interview_scheduled"].includes(e.status)).length;return C?(0,a.jsx)("div",{className:"container mx-auto p-6 flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(v.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading your applications..."})]})}):S?(0,a.jsx)("div",{className:"container mx-auto p-6",children:(0,a.jsxs)(c.Zp,{className:"max-w-md mx-auto",children:[(0,a.jsxs)(c.aR,{className:"text-center",children:[(0,a.jsx)(j.A,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),(0,a.jsx)(c.ZB,{children:"Error Loading Applications"})]}),(0,a.jsxs)(c.Wu,{className:"text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:S}),(0,a.jsx)(n.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})]})}):(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[(0,a.jsx)(N.A,{className:"h-8 w-8 text-primary"}),"My Applications"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track and manage all your job applications in one place"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{className:"pb-2",children:(0,a.jsx)(c.BT,{children:"Total Applications"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.length})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{className:"pb-2",children:(0,a.jsx)(c.BT,{children:"Active Applications"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:I})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{className:"pb-2",children:(0,a.jsx)(c.BT,{children:"Interviews Scheduled"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.filter(e=>"interview_scheduled"===e.status).length})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{className:"pb-2",children:(0,a.jsx)(c.BT,{children:"Response Rate"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(s.filter(e=>"submitted"!==e.status).length/s.length*100),"%"]})})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(f.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(o.p,{placeholder:"Search by job title or company...",value:A,onChange:e=>_(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(n.$,{variant:"outline",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),(0,a.jsxs)(d.tU,{value:L,onValueChange:k,children:[(0,a.jsxs)(d.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(d.Xi,{value:"all",children:["All (",s.length,")"]}),(0,a.jsxs)(d.Xi,{value:"active",children:["Active (",I,")"]}),(0,a.jsxs)(d.Xi,{value:"archived",children:["Archived (",s.length-I,")"]})]}),(0,a.jsx)(d.av,{value:L,className:"mt-6 space-y-4",children:0===Z.length?(0,a.jsx)(c.Zp,{children:(0,a.jsxs)(c.Wu,{className:"text-center py-12",children:[(0,a.jsx)(j.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No applications found"})]})}):Z.map(e=>(0,a.jsx)(c.Zp,{className:"hover:shadow-md transition-shadow",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex gap-4 flex-1",children:[(0,a.jsx)("img",{src:e.companyLogo,alt:e.company,className:"w-16 h-16 rounded-lg object-cover"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e.jobTitle}),(0,a.jsx)("p",{className:"text-muted-foreground",children:e.company})]}),(0,a.jsxs)(r.E,{variant:W(e.status),className:"flex items-center gap-1",children:[R(e.status),D(e.status)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{className:"h-3 w-3"}),e.location]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.A,{className:"h-3 w-3"}),e.salary]}),"quick_apply"===e.applicationMethod&&(0,a.jsxs)(r.E,{variant:"secondary",className:"text-xs",children:[(0,a.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Quick Apply"]})]}),e.coverNote&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground italic mb-3",children:['"',e.coverNote,'"']}),e.interviews&&e.interviews.length>0&&(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3 mb-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-1",children:"Upcoming Interview:"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.interviews[0].type," - ",new Date(e.interviews[0].date).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Applied ",new Date(e.appliedAt).toLocaleDateString()," â€¢ Last activity ",new Date(e.lastActivity).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",children:"View Details"}),"interview_scheduled"===e.status&&(0,a.jsx)(n.$,{size:"sm",children:"Prepare for Interview"})]})]})]})]})})})},e.id))})]})]})}},89567:(e,s,t)=>{Promise.resolve().then(t.bind(t,82774))}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(89567)),_N_E=e.O()}]);