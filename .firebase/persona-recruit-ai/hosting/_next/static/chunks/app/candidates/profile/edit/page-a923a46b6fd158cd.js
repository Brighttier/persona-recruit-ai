(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{23118:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>S});var a=l(95155),r=l(12115),i=l(35695),t=l(6874),n=l.n(t),d=l(66695),c=l(30285),o=l(62523),h=l(85057),m=l(88539),x=l(26126),u=l(55365),j=l(50172),p=l(11133),f=l(8376),y=l(91721),v=l(18046),N=l(25318),g=l(86318),b=l(45481),w=l(67933),k=l(15300),A=l(16923),C=l(59119);function S(){let[e,s]=(0,r.useState)(null),[l,t]=(0,r.useState)(!0),[S,F]=(0,r.useState)(!1),[U,T]=(0,r.useState)(!1),[B,R]=(0,r.useState)(null),[Z,P]=(0,r.useState)(null),[J,E]=(0,r.useState)(""),[_,W]=(0,r.useState)(null),[$,D]=(0,r.useState)(null),[I,L]=(0,r.useState)(!1),[q,O]=(0,r.useState)(!1),V=(0,i.useRouter)();(0,r.useEffect)(()=>{z()},[]);let z=async()=>{try{let e=await fetch("/api/candidates/profile");if(e.ok){let l=await e.json();s(l.profile)}else R("Failed to load profile")}catch(e){R("An error occurred while loading your profile")}finally{t(!1)}},K=async s=>{if(s.preventDefault(),e){F(!0),R(null),P(null);try{let s=await fetch("/api/candidates/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)P("Profile updated successfully!"),setTimeout(()=>{V.push("/candidates/profile")},2e3);else{let e=await s.json();R(e.error||"Failed to update profile")}}catch(e){R("An error occurred while updating your profile")}finally{F(!1)}}},Y=()=>{J.trim()&&e&&!e.skills.includes(J.trim())&&(s({...e,skills:[...e.skills,J.trim()]}),E(""))},G=l=>{e&&s({...e,skills:e.skills.filter(e=>e!==l)})},H=async e=>{O(!0),R(null);try{let l=new FormData;l.append("resume",e);let a=await fetch("/api/candidates/resume",{method:"POST",body:l});if(a.ok){let e=await a.json();s(s=>s?{...s,resumeUrl:e.resumeUrl}:null),P("Resume updated successfully!")}else{let e=await a.json();R(e.error||"Failed to upload resume")}}catch(e){R("An error occurred while uploading your resume")}finally{O(!1),D(null)}},M=()=>{V.push("/candidates/onboarding/video-intro?edit=true")};return l?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(j.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading your profile..."})]})}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Profile"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Update your information and preferences"})]}),(0,a.jsx)(n(),{href:"/candidates/profile",children:(0,a.jsx)(c.$,{variant:"outline",children:"Cancel"})})]})})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[B&&(0,a.jsxs)(u.Fc,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)(u.TN,{children:B})]}),Z&&(0,a.jsxs)(u.Fc,{className:"mb-6 border-green-200 bg-green-50",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(u.TN,{className:"text-green-800",children:Z})]}),(0,a.jsxs)("form",{onSubmit:K,className:"space-y-6",children:[(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"h-5 w-5"}),"Basic Information"]}),(0,a.jsx)(d.BT,{children:"Your basic contact information and current role"})]}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"firstName",children:"First Name"}),(0,a.jsx)(o.p,{id:"firstName",value:e.firstName,onChange:l=>s({...e,firstName:l.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"lastName",children:"Last Name"}),(0,a.jsx)(o.p,{id:"lastName",value:e.lastName,onChange:l=>s({...e,lastName:l.target.value}),required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"email",children:"Email Address"}),(0,a.jsx)(o.p,{id:"email",type:"email",value:e.email,disabled:!0,className:"bg-gray-50"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Contact support to change your email address"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)(o.p,{id:"phone",type:"tel",value:e.phone||"",onChange:l=>s({...e,phone:l.target.value}),placeholder:"+1 (555) 123-4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"location",children:"Location"}),(0,a.jsx)(o.p,{id:"location",value:e.location||"",onChange:l=>s({...e,location:l.target.value}),placeholder:"San Francisco, CA"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"currentTitle",children:"Current Title"}),(0,a.jsx)(o.p,{id:"currentTitle",value:e.currentTitle,onChange:l=>s({...e,currentTitle:l.target.value}),placeholder:"Senior Software Engineer",required:!0})]})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Professional Summary"}),(0,a.jsx)(d.BT,{children:"Tell us about your experience and what you're looking for"})]}),(0,a.jsxs)(d.Wu,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"summary",children:"Summary"}),(0,a.jsx)(m.T,{id:"summary",value:e.summary,onChange:l=>s({...e,summary:l.target.value}),placeholder:"Describe your experience, skills, and career goals...",rows:4,required:!0}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.summary.length," characters"]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(h.J,{htmlFor:"availability",children:"Availability"}),(0,a.jsxs)("select",{id:"availability",value:e.availability||"",onChange:l=>s({...e,availability:l.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select availability"}),(0,a.jsx)("option",{value:"immediate",children:"Available immediately"}),(0,a.jsx)("option",{value:"within_2_weeks",children:"Available within 2 weeks"}),(0,a.jsx)("option",{value:"within_month",children:"Available within a month"}),(0,a.jsx)("option",{value:"flexible",children:"Flexible timing"})]})]})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsx)(d.ZB,{children:"Skills & Expertise"}),(0,a.jsx)(d.BT,{children:"Add skills that showcase your expertise"})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.p,{value:J,onChange:e=>E(e.target.value),placeholder:"Add a skill...",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Y())}}),(0,a.jsx)(c.$,{type:"button",onClick:Y,variant:"outline",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.skills.map((e,s)=>(0,a.jsxs)(x.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>G(e),className:"ml-1 hover:text-red-500",children:(0,a.jsx)(N.A,{className:"h-3 w-3"})})]},s))}),0===e.skills.length&&(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No skills added yet. Add some skills to showcase your expertise."})]})})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-5 w-5"}),"Professional Links"]}),(0,a.jsx)(d.BT,{children:"Add links to your professional profiles and portfolio"})]}),(0,a.jsxs)(d.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"linkedinUrl",children:"LinkedIn Profile"}),(0,a.jsx)(o.p,{id:"linkedinUrl",type:"url",value:e.linkedinUrl||"",onChange:l=>s({...e,linkedinUrl:l.target.value}),placeholder:"https://linkedin.com/in/yourprofile"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"portfolioUrl",children:"Portfolio/Website"}),(0,a.jsx)(o.p,{id:"portfolioUrl",type:"url",value:e.portfolioUrl||"",onChange:l=>s({...e,portfolioUrl:l.target.value}),placeholder:"https://yourwebsite.com"})]})]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5"}),"Video Introduction"]}),(0,a.jsx)(d.BT,{children:"Record a short video to introduce yourself to employers"})]}),(0,a.jsx)(d.Wu,{children:e.videoIntroUrl?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-video bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("video",{src:e.videoIntroUrl,controls:!0,className:"w-full h-full rounded-lg"})}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(c.$,{type:"button",onClick:M,variant:"outline",className:"flex-1",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Re-record Video"]})})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-video bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No video introduction yet"})]})}),(0,a.jsxs)(c.$,{type:"button",onClick:M,className:"w-full",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Record Video Introduction"]})]})})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsxs)(d.aR,{children:[(0,a.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-5 w-5"}),"Resume"]}),(0,a.jsx)(d.BT,{children:"Upload your latest resume (PDF format recommended)"})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[e.resumeUrl?(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Current resume uploaded"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(c.$,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(e.resumeUrl,"_blank"),children:"View"})})]}):(0,a.jsxs)("div",{className:"text-center p-6 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,a.jsx)(k.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No resume uploaded yet"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>{var s;let l=null==(s=e.target.files)?void 0:s[0];l&&(D(l),H(l))},className:"hidden",id:"resume-upload"}),(0,a.jsx)("label",{htmlFor:"resume-upload",children:(0,a.jsx)(c.$,{type:"button",variant:"outline",className:"w-full",disabled:q,asChild:!0,children:(0,a.jsxs)("span",{children:[q?(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(A.A,{className:"h-4 w-4 mr-2"}),q?"Uploading...":e.resumeUrl?"Update Resume":"Upload Resume"]})})})]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,a.jsxs)(c.$,{type:"submit",disabled:S,className:"flex-1",children:[S?(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2"}),S?"Saving...":"Save Changes"]}),(0,a.jsx)(n(),{href:"/candidates/profile",children:(0,a.jsx)(c.$,{type:"button",variant:"outline",children:"Cancel"})})]})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)(d.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(d.aR,{className:"text-center",children:[(0,a.jsx)(p.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)(d.ZB,{children:"Profile Not Found"}),(0,a.jsx)(d.BT,{children:"We couldn't load your profile. Please try again or contact support."})]}),(0,a.jsx)(d.Wu,{children:(0,a.jsx)(c.$,{onClick:()=>V.push("/candidates/dashboard"),className:"w-full",children:"Back to Dashboard"})})]})})}},93895:(e,s,l)=>{Promise.resolve().then(l.bind(l,23118))}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(93895)),_N_E=e.O()}]);