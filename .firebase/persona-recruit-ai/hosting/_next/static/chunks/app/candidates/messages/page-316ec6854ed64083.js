(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4870],{29203:(e,s,a)=>{Promise.resolve().then(a.bind(a,33584))},33584:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(95155),i=a(12115),r=a(18477),l=a(13563),n=a(66695),c=a(30285),o=a(26126),d=a(62523),m=a(88539),h=a(59409),x=a(17313),p=a(91394),u=a(54165),j=a(98328),v=a(57082),f=a(30462),w=a(36931),y=a(94063),g=a(37648),N=a(75074),b=a(3561),S=a(82474),A=a(35007),C=a(65064),R=a(8376),_=a(73672);function k(){let[e,s]=(0,i.useState)([]),[a,k]=(0,i.useState)([]),[L,T]=(0,i.useState)([]),[E,Z]=(0,i.useState)(null),[J,M]=(0,i.useState)(!0),[I,F]=(0,i.useState)(""),[U,$]=(0,i.useState)("all"),[z,D]=(0,i.useState)("all"),[W,V]=(0,i.useState)(""),[q,B]=(0,i.useState)(!1);(0,i.useEffect)(()=>{P()},[]),(0,i.useEffect)(()=>{Y()},[e,I,U,z]);let P=async()=>{try{let[e,a]=await Promise.all([fetch("/api/candidates/messages"),fetch("/api/candidates/notifications")]);if(e.ok){let a=await e.json();s(a.data.messages||[])}if(a.ok){let e=await a.json();k(e.data.notifications||[])}}catch(e){console.error("Error fetching messages and notifications:",e),s([{id:"1",type:"interview_invite",from:{name:"Sarah Johnson",email:"sarah@techcorp.com",company:"TechCorp Inc.",role:"recruiter",avatar:void 0},subject:"Interview Invitation - Senior Frontend Developer",content:"Hi John! We were impressed with your application for the Senior Frontend Developer position. We would like to invite you for a technical interview next week. Please let me know your availability for Tuesday or Wednesday afternoon.",timestamp:"2024-06-24T10:30:00Z",isRead:!1,isStarred:!1,priority:"high",relatedJob:{id:"job_1",title:"Senior Frontend Developer",company:"TechCorp Inc."},actions:[{id:"accept",label:"Accept Interview",type:"primary",action:"accept_interview"},{id:"reschedule",label:"Request Reschedule",type:"secondary",action:"reschedule_interview"}]},{id:"2",type:"application_update",from:{name:"Mike Chen",email:"mike@startup.com",company:"StartupXYZ",role:"hiring_manager",avatar:void 0},subject:"Application Status Update - Full Stack Engineer",content:"Thank you for your interest in the Full Stack Engineer position. Your application has been reviewed and we would like to move forward with the next stage of our hiring process.",timestamp:"2024-06-23T14:15:00Z",isRead:!0,isStarred:!0,priority:"normal",relatedJob:{id:"job_2",title:"Full Stack Engineer",company:"StartupXYZ"}},{id:"3",type:"job_match",from:{name:"AI Talent Matcher",email:"ai@platform.com",role:"system",avatar:void 0},subject:"New Job Matches Found - 5 opportunities",content:"Based on your profile and preferences, we found 5 new job opportunities that match your skills. These positions have high compatibility scores and are from companies actively hiring.",timestamp:"2024-06-22T09:00:00Z",isRead:!0,isStarred:!1,priority:"normal",actions:[{id:"view_matches",label:"View Job Matches",type:"primary",action:"view_job_matches"}]}]),k([{id:"1",type:"interview_scheduled",title:"Interview Scheduled",message:"Your interview for Senior Frontend Developer at TechCorp Inc. is scheduled for tomorrow at 2:00 PM",timestamp:"2024-06-23T16:00:00Z",isRead:!1,priority:"high",actionUrl:"/candidates/my-interviews",actionLabel:"View Interview"},{id:"2",type:"application_status",title:"Application Status Changed",message:'Your application for Product Manager at Enterprise Ltd. has been updated to "Under Review"',timestamp:"2024-06-23T11:30:00Z",isRead:!0,priority:"normal",actionUrl:"/candidates/my-applications",actionLabel:"View Application"},{id:"3",type:"job_recommendation",title:"New Job Recommendations",message:"3 new jobs matching your profile have been added to your recommendations",timestamp:"2024-06-22T08:00:00Z",isRead:!0,priority:"low",actionUrl:"/candidates/job-recommendations",actionLabel:"View Jobs"}])}finally{M(!1)}},Y=()=>{let s=e;if(I&&(s=s.filter(e=>{var s;return e.subject.toLowerCase().includes(I.toLowerCase())||e.content.toLowerCase().includes(I.toLowerCase())||e.from.name.toLowerCase().includes(I.toLowerCase())||(null==(s=e.from.company)?void 0:s.toLowerCase().includes(I.toLowerCase()))})),"all"!==U&&(s=s.filter(e=>e.type===U)),"all"!==z){let e="read"===z;s=s.filter(s=>s.isRead===e)}T(s)},X=async e=>{s(s=>s.map(s=>s.id===e?{...s,isRead:!0}:s))},O=async e=>{s(s=>s.map(s=>s.id===e?{...s,isStarred:!s.isStarred}:s))},H=async e=>{k(s=>s.map(s=>s.id===e?{...s,isRead:!0}:s))},G=async()=>{if(E&&W.trim())try{console.log("Sending reply:",{messageId:E.id,content:W}),V(""),B(!1)}catch(e){console.error("Error sending reply:",e)}},K=e=>{switch(e){case"interview_invite":return(0,t.jsx)(j.A,{className:"h-4 w-4 text-blue-600"});case"application_update":return(0,t.jsx)(v.A,{className:"h-4 w-4 text-green-600"});case"job_match":return(0,t.jsx)(f.A,{className:"h-4 w-4 text-yellow-600"});case"system":return(0,t.jsx)(w.A,{className:"h-4 w-4 text-gray-600"});default:return(0,t.jsx)(y.A,{className:"h-4 w-4"})}},Q=e=>{switch(e){case"urgent":return(0,t.jsx)(o.E,{variant:"destructive",children:"Urgent"});case"high":return(0,t.jsx)(o.E,{className:"bg-orange-100 text-orange-800",children:"High"});case"normal":default:return null;case"low":return(0,t.jsx)(o.E,{variant:"secondary",children:"Low"})}},ee=e=>{switch(e){case"interview_scheduled":return(0,t.jsx)(j.A,{className:"h-4 w-4 text-blue-600"});case"application_status":return(0,t.jsx)(v.A,{className:"h-4 w-4 text-green-600"});case"job_recommendation":return(0,t.jsx)(f.A,{className:"h-4 w-4 text-yellow-600"});case"message_received":return(0,t.jsx)(y.A,{className:"h-4 w-4 text-purple-600"});case"deadline_reminder":return(0,t.jsx)(g.A,{className:"h-4 w-4 text-red-600"});default:return(0,t.jsx)(w.A,{className:"h-4 w-4"})}},es=e.filter(e=>!e.isRead).length,ea=a.filter(e=>!e.isRead).length;return(0,t.jsx)(r.N,{children:(0,t.jsxs)(l.m,{className:"py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-foreground flex items-center",children:[(0,t.jsx)(y.A,{className:"mr-3 h-8 w-8 text-primary"}),"Messages & Notifications"]}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Stay connected with recruiters and track important updates about your applications"})]}),(0,t.jsxs)(x.tU,{defaultValue:"messages",className:"space-y-6",children:[(0,t.jsxs)(x.j7,{children:[(0,t.jsxs)(x.Xi,{value:"messages",className:"relative",children:["Messages",es>0&&(0,t.jsx)(o.E,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs",children:es})]}),(0,t.jsxs)(x.Xi,{value:"notifications",className:"relative",children:["Notifications",ea>0&&(0,t.jsx)(o.E,{className:"ml-2 h-5 w-5 rounded-full p-0 text-xs",children:ea})]})]}),(0,t.jsx)(x.av,{value:"messages",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)(n.ZB,{children:["Messages (",L.length,")"]})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(d.p,{placeholder:"Search messages...",value:I,onChange:e=>F(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(h.l6,{value:U,onValueChange:$,children:[(0,t.jsx)(h.bq,{className:"text-xs",children:(0,t.jsx)(h.yv,{placeholder:"Type"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"all",children:"All Types"}),(0,t.jsx)(h.eb,{value:"message",children:"Messages"}),(0,t.jsx)(h.eb,{value:"interview_invite",children:"Interviews"}),(0,t.jsx)(h.eb,{value:"application_update",children:"Applications"}),(0,t.jsx)(h.eb,{value:"job_match",children:"Job Matches"})]})]}),(0,t.jsxs)(h.l6,{value:z,onValueChange:D,children:[(0,t.jsx)(h.bq,{className:"text-xs",children:(0,t.jsx)(h.yv,{placeholder:"Status"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"all",children:"All"}),(0,t.jsx)(h.eb,{value:"unread",children:"Unread"}),(0,t.jsx)(h.eb,{value:"read",children:"Read"})]})]})]})]})]}),(0,t.jsx)(n.Wu,{className:"p-0",children:(0,t.jsx)("div",{className:"space-y-0",children:L.map(e=>(0,t.jsx)("div",{className:"p-4 border-b cursor-pointer hover:bg-muted/50 transition-colors ".concat((null==E?void 0:E.id)===e.id?"bg-muted":""," ").concat(e.isRead?"":"border-l-4 border-l-primary"),onClick:()=>{Z(e),e.isRead||X(e.id)},children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,t.jsx)(p.eu,{className:"h-8 w-8",children:(0,t.jsx)(p.q5,{children:e.from.name.split(" ").map(e=>e[0]).join("")})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[K(e.type),(0,t.jsx)("span",{className:"text-sm ".concat(e.isRead?"font-medium":"font-semibold"),children:e.from.name}),e.isStarred&&(0,t.jsx)(f.A,{className:"h-3 w-3 text-yellow-500 fill-current"})]}),(0,t.jsx)("p",{className:"text-sm truncate ".concat(e.isRead?"":"font-medium"),children:e.subject}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleDateString()}),Q(e.priority)]})]})]})})},e.id))})})]})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:E?(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[K(E.type),(0,t.jsx)(n.ZB,{className:"text-lg",children:E.subject}),Q(E.priority)]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.eu,{className:"h-6 w-6",children:(0,t.jsx)(p.q5,{className:"text-xs",children:E.from.name.split(" ").map(e=>e[0]).join("")})}),(0,t.jsx)("span",{children:E.from.name}),E.from.company&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:E.from.company})]})]}),(0,t.jsx)("span",{children:new Date(E.timestamp).toLocaleString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>O(E.id),children:(0,t.jsx)(f.A,{className:"h-4 w-4 ".concat(E.isStarred?"text-yellow-500 fill-current":"")})}),(0,t.jsx)(c.$,{variant:"ghost",size:"sm",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})]})]}),E.relatedJob&&(0,t.jsx)("div",{className:"mt-3 p-3 bg-muted rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Related Job:"}),(0,t.jsx)("span",{className:"text-sm",children:E.relatedJob.title}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["at ",E.relatedJob.company]})]})})]}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:E.content})}),E.actions&&E.actions.length>0&&(0,t.jsx)("div",{className:"mt-6 flex flex-wrap gap-2",children:E.actions.map(e=>(0,t.jsx)(c.$,{variant:"primary"===e.type?"default":"danger"===e.type?"destructive":"outline",size:"sm",children:e.label},e.id))})]}),(0,t.jsx)(n.Wu,{className:"border-t",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>B(!0),children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Reply"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Forward"]}),(0,t.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Archive"]})]})})]}):(0,t.jsx)(n.Zp,{children:(0,t.jsxs)(n.Wu,{className:"text-center py-12",children:[(0,t.jsx)(y.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Select a message"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Choose a message from the list to view its details."})]})})})]})}),(0,t.jsx)(x.av,{value:"notifications",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Recent Notifications"}),(0,t.jsx)(n.BT,{children:"Stay updated on your job search progress"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsx)("div",{className:"p-4 border rounded-lg ".concat(e.isRead?"":"border-primary bg-primary/5"),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[ee(e.type),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium ".concat(e.isRead?"":"font-semibold"),children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.message}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleString()}),e.actionUrl&&(0,t.jsx)(c.$,{size:"sm",variant:"outline",asChild:!0,children:(0,t.jsx)("a",{href:e.actionUrl,children:e.actionLabel})})]})]})]}),!e.isRead&&(0,t.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>H(e.id),children:(0,t.jsx)(R.A,{className:"h-4 w-4"})})]})},e.id))})})]})})]}),(0,t.jsx)(u.lG,{open:q,onOpenChange:B,children:(0,t.jsxs)(u.Cf,{children:[(0,t.jsxs)(u.c7,{children:[(0,t.jsx)(u.L3,{children:"Reply to Message"}),(0,t.jsxs)(u.rr,{children:["Send a reply to ",null==E?void 0:E.from.name]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(m.T,{placeholder:"Type your reply...",value:W,onChange:e=>V(e.target.value),rows:6}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(c.$,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),(0,t.jsxs)(c.$,{onClick:G,disabled:!W.trim(),children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Send Reply"]})]})]})]})})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(29203)),_N_E=e.O()}]);