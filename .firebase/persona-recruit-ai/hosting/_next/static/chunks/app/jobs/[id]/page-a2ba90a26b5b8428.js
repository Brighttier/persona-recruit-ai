(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3747],{67359:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,6874,23)),Promise.resolve().then(s.t.bind(s,33063,23)),Promise.resolve().then(s.bind(s,88048)),Promise.resolve().then(s.bind(s,22346))},88048:(e,a,s)=>{"use strict";s.d(a,{QuickApplyButton:()=>k});var i=s(95155),l=s(12115),t=s(35695),n=s(30285),r=s(54165),c=s(88539),o=s(62523),d=s(85057),m=s(47262),p=s(26126),h=s(55365),x=s(24944),u=s(87481),j=s(50172),v=s(89829),f=s(45481),N=s(88390),y=s(98328),g=s(83662),b=s(57082),w=s(8376);function k(e){var a;let{jobId:s,jobTitle:k,companyName:S,className:A}=e,C=(0,t.useRouter)(),{toast:F}=(0,u.dj)(),[P,E]=(0,l.useState)(!1),[I,O]=(0,l.useState)(!1),[T,R]=(0,l.useState)(!1),[$,_]=(0,l.useState)(null),[Q,J]=(0,l.useState)({coverNote:"",willingToRelocate:!1}),z=async()=>{try{O(!0);let e=await fetch("/api/jobs/".concat(s,"/quick-apply"));if(!e.ok)throw Error("Failed to check eligibility");let a=await e.json();_(a.data),a.data.eligible?E(!0):a.data.reasons.hasVideoIntro?a.data.reasons.profileComplete?a.data.reasons.alreadyApplied?F({title:"Already Applied",description:"You have already applied to this job.",variant:"default"}):F({title:"Quick Apply Unavailable",description:"Quick Apply is not available for this job.",variant:"default"}):F({title:"Complete Your Profile",description:"Please complete your profile before applying to jobs.",action:(0,i.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>C.push("/candidates/profile"),children:"Complete Profile"})}):F({title:"Video Introduction Required",description:"Please complete your video introduction to use Quick Apply.",action:(0,i.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>C.push("/candidates/onboarding/video-intro"),children:"Record Video"})})}catch(e){F({title:"Error",description:"Failed to check eligibility. Please try again.",variant:"destructive"})}finally{O(!1)}},U=async()=>{try{R(!0);let e=await fetch("/api/jobs/".concat(s,"/quick-apply"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!e.ok){let a=await e.json();throw Error(a.error||"Application failed")}let a=await e.json();E(!1),F({title:"\uD83C\uDF89 Application Submitted!",description:a.message,action:(0,i.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>C.push("/candidates/my-applications"),children:"View Applications"})})}catch(e){F({title:"Application Failed",description:e instanceof Error?e.message:"Please try again.",variant:"destructive"})}finally{R(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.$,{onClick:z,disabled:I,className:A,variant:"default",children:I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Quick Apply"]})}),(0,i.jsx)(r.lG,{open:P,onOpenChange:E,children:(0,i.jsxs)(r.Cf,{className:"max-w-2xl",children:[(0,i.jsxs)(r.c7,{children:[(0,i.jsxs)(r.L3,{className:"flex items-center gap-2",children:[(0,i.jsx)(v.A,{className:"h-5 w-5 text-primary"}),"Quick Apply to ",k]}),(0,i.jsxs)(r.rr,{children:["at ",S]})]}),$&&(0,i.jsxs)("div",{className:"space-y-6",children:[void 0!==$.matchScore&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,i.jsx)("span",{className:"font-medium",children:"Profile Match"}),(0,i.jsxs)("span",{className:"text-muted-foreground",children:[$.matchScore,"%"]})]}),(0,i.jsx)(x.k,{value:$.matchScore,className:"h-2"})]}),(0,i.jsxs)(h.Fc,{children:[(0,i.jsx)(f.A,{className:"h-4 w-4"}),(0,i.jsxs)(h.TN,{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{children:"Your video introduction will be included with this application"}),(0,i.jsx)(n.$,{variant:"link",size:"sm",onClick:()=>window.open($.candidateInfo.videoIntroUrl,"_blank"),children:"Preview"})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{htmlFor:"coverNote",children:"Brief Cover Note (Optional)"}),(0,i.jsx)(c.T,{id:"coverNote",placeholder:"Add a personal touch to your application...",value:Q.coverNote,onChange:e=>J({...Q,coverNote:e.target.value}),className:"mt-1",rows:3,maxLength:500}),(0,i.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[(null==(a=Q.coverNote)?void 0:a.length)||0,"/500 characters"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{htmlFor:"minSalary",children:"Expected Salary Range (Optional)"}),(0,i.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,i.jsxs)("div",{className:"relative flex-1",children:[(0,i.jsx)(N.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(o.p,{id:"minSalary",type:"number",placeholder:"Min",className:"pl-10",onChange:e=>{var a;return J({...Q,expectedSalary:{...Q.expectedSalary||{currency:"USD"},min:parseInt(e.target.value)||0,max:(null==(a=Q.expectedSalary)?void 0:a.max)||0}})}})]}),(0,i.jsx)("span",{className:"self-center",children:"-"}),(0,i.jsxs)("div",{className:"relative flex-1",children:[(0,i.jsx)(N.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(o.p,{type:"number",placeholder:"Max",className:"pl-10",onChange:e=>{var a;return J({...Q,expectedSalary:{...Q.expectedSalary||{currency:"USD"},min:(null==(a=Q.expectedSalary)?void 0:a.min)||0,max:parseInt(e.target.value)||0}})}})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(d.J,{htmlFor:"availableFrom",children:"Available From (Optional)"}),(0,i.jsxs)("div",{className:"relative mt-1",children:[(0,i.jsx)(y.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,i.jsx)(o.p,{id:"availableFrom",type:"date",className:"pl-10",min:new Date().toISOString().split("T")[0],onChange:e=>J({...Q,availableFrom:e.target.value})})]})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(m.S,{id:"relocate",checked:Q.willingToRelocate,onCheckedChange:e=>J({...Q,willingToRelocate:e})}),(0,i.jsxs)(d.J,{htmlFor:"relocate",className:"flex items-center gap-2 cursor-pointer",children:[(0,i.jsx)(g.A,{className:"h-4 w-4"}),"I'm willing to relocate for this position"]})]})]}),(0,i.jsxs)("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Your Profile Summary"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsxs)(p.E,{variant:"secondary",className:"text-xs",children:[(0,i.jsx)(b.A,{className:"h-3 w-3 mr-1"}),$.candidateInfo.experience]}),$.candidateInfo.skills.slice(0,5).map(e=>(0,i.jsx)(p.E,{variant:"outline",className:"text-xs",children:e},e)),$.candidateInfo.skills.length>5&&(0,i.jsxs)(p.E,{variant:"outline",className:"text-xs",children:["+",$.candidateInfo.skills.length-5," more"]})]})]})]}),(0,i.jsxs)(r.Es,{children:[(0,i.jsx)(n.$,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,i.jsx)(n.$,{onClick:U,disabled:T,children:T?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Submit Application"]})})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[4121,2076,7358],()=>a(67359)),_N_E=e.O()}]);