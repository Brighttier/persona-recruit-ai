(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9633],{33190:(e,s,n)=>{Promise.resolve().then(n.bind(n,39015))},39015:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>I});var a=n(95155),l=n(12115),r=n(35695),i=n(6874),t=n.n(i),c=n(62177),d=n(90221),o=n(71153),m=n(13610),x=n(13563),j=n(30285),h=n(66695),u=n(62523),p=n(88539),y=n(59409),b=n(17759),v=n(50172),f=n(11133),C=n(12543),N=n(86950),g=n(59119),w=n(87481),z=n(40283),k=n(14690);let B=o.Ik({name:o.Yj().min(2,"Company name must be at least 2 characters"),domain:o.Yj().min(2,"Domain is required"),website:o.Yj().url().optional().or(o.eu("")),size:o.k5(["1-10","11-50","51-200","201-1000","1000+"]),industry:o.Yj().min(2,"Industry is required"),location:o.Yj().min(2,"Location is required"),description:o.Yj().max(2e3).optional(),founded:o.ai().min(1800).max(new Date().getFullYear()).optional(),status:o.k5(["active","suspended","pending"])});function I(){let{loading:e}=(0,z.A)(),s=(0,r.useRouter)(),n=(0,r.useParams)().id,{toast:i}=(0,w.dj)(),o=(0,k.J)(),[I,S]=(0,l.useState)(!0),[A,J]=(0,l.useState)(!1),[R,E]=(0,l.useState)(null),M=(0,c.mN)({resolver:(0,d.u)(B),defaultValues:{name:"",domain:"",website:"",size:"1-10",industry:"",location:"",description:"",status:"active"}}),Y=(0,l.useCallback)(async()=>{if(!e&&n){S(!0),E(null);try{let e=(await o("/api/admin/companies/".concat(n))).data.company;M.reset({name:e.name,domain:e.domain,website:e.website,size:e.size,industry:e.industry,location:e.location,description:e.description,founded:e.founded,status:e.status.toLowerCase()})}catch(e){E(e instanceof Error?e.message:"Failed to load company data")}finally{S(!1)}}},[n,e,o,M]);(0,l.useEffect)(()=>{Y()},[Y]);let _=async e=>{J(!0);try{await o("/api/admin/companies/".concat(n),{method:"PATCH",body:JSON.stringify(e)}),i({title:"✅ Success",description:"Company details updated successfully."}),s.push("/admin/company-management/".concat(n))}catch(e){i({title:"❌ Error",description:e instanceof Error?e.message:"Failed to update company",variant:"destructive"})}finally{J(!1)}};return I?(0,a.jsx)(m.U,{children:(0,a.jsx)(x.m,{className:"py-8",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(v.A,{className:"h-8 w-8 animate-spin"})})})}):R?(0,a.jsx)(m.U,{children:(0,a.jsx)(x.m,{className:"py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 mx-auto mb-4 text-destructive"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Error"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:R}),(0,a.jsxs)(j.$,{onClick:()=>s.back(),className:"mt-4",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Go Back"]})]})})}):(0,a.jsx)(m.U,{children:(0,a.jsx)(x.m,{className:"py-8",children:(0,a.jsx)(b.lV,{...M,children:(0,a.jsxs)("form",{onSubmit:M.handleSubmit(_),className:"space-y-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(t(),{href:"/admin/company-management/".concat(n),passHref:!0,children:(0,a.jsxs)(j.$,{variant:"ghost",size:"sm",className:"mb-4",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Back to Company Details"]})}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-foreground flex items-center",children:[(0,a.jsx)(N.A,{className:"mr-3 h-8 w-8 text-primary"}),"Edit Company: ",M.getValues("name")]})]}),(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsx)(h.ZB,{children:"Company Information"}),(0,a.jsx)(h.BT,{children:"Update the core details of the company."})]}),(0,a.jsxs)(h.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(b.zB,{control:M.control,name:"name",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Company Name"}),(0,a.jsx)(b.MJ,{children:(0,a.jsx)(u.p,{...s})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:M.control,name:"domain",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Domain"}),(0,a.jsx)(b.MJ,{children:(0,a.jsx)(u.p,{...s})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:M.control,name:"website",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Website"}),(0,a.jsx)(b.MJ,{children:(0,a.jsx)(u.p,{...s})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:M.control,name:"location",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Location"}),(0,a.jsx)(b.MJ,{children:(0,a.jsx)(u.p,{...s})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:M.control,name:"industry",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Industry"}),(0,a.jsx)(b.MJ,{children:(0,a.jsx)(u.p,{...s})}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:M.control,name:"size",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Company Size"}),(0,a.jsxs)(y.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(b.MJ,{children:(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{})})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"1-10",children:"1-10 employees"}),(0,a.jsx)(y.eb,{value:"11-50",children:"11-50 employees"}),(0,a.jsx)(y.eb,{value:"51-200",children:"51-200 employees"}),(0,a.jsx)(y.eb,{value:"201-1000",children:"201-1000 employees"}),(0,a.jsx)(y.eb,{value:"1000+",children:"1000+ employees"})]})]}),(0,a.jsx)(b.C5,{})]})}}),(0,a.jsx)(b.zB,{control:M.control,name:"status",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Status"}),(0,a.jsxs)(y.l6,{onValueChange:s.onChange,value:s.value,children:[(0,a.jsx)(b.MJ,{children:(0,a.jsx)(y.bq,{children:(0,a.jsx)(y.yv,{})})}),(0,a.jsxs)(y.gC,{children:[(0,a.jsx)(y.eb,{value:"active",children:"Active"}),(0,a.jsx)(y.eb,{value:"suspended",children:"Suspended"}),(0,a.jsx)(y.eb,{value:"pending",children:"Pending"})]})]}),(0,a.jsx)(b.C5,{})]})}})]}),(0,a.jsx)(b.zB,{control:M.control,name:"description",render:e=>{let{field:s}=e;return(0,a.jsxs)(b.eI,{children:[(0,a.jsx)(b.lR,{children:"Description"}),(0,a.jsx)(b.MJ,{children:(0,a.jsx)(p.T,{...s,rows:4})}),(0,a.jsx)(b.C5,{})]})}})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(j.$,{type:"submit",disabled:A,children:[A?(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(33190)),_N_E=e.O()}]);