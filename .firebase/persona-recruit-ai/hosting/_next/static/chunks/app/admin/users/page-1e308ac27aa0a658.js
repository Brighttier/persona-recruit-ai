(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{52899:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>J});var r=a(95155),n=a(12115),l=a(14690),i=a(30285),t=a(66695),c=a(62523),d=a(26126),x=a(59409),m=a(54913),h=a(45731),o=a(50286),j=a(17607),u=a(57082),p=a(8376),v=a(24371),N=a(37648),g=a(18046),f=a(9572),w=a(75074),b=a(86950),y=a(18763),A=a(76603),C=a(85127),_=a(54165),S=a(45043),I=a(62177),R=a(90221),L=a(71153),z=a(87481),B=a(17759);let U=L.Ik({firstName:L.Yj().min(2,"First name is required"),lastName:L.Yj().min(2,"Last name is required"),email:L.Yj().email("Invalid email address"),password:L.Yj().min(8,"Password must be at least 8 characters"),role:L.k5(["candidate","recruiter","interviewer","company_admin","super_admin"]),companyId:L.Yj().optional()}).refine(e=>"super_admin"===e.role||"candidate"===e.role||!!e.companyId,{message:"Company is required for this role",path:["companyId"]});function J(){let[e,s]=(0,n.useState)(""),[a,L]=(0,n.useState)("all"),[J,M]=(0,n.useState)("all"),[E,V]=(0,n.useState)(!1),{toast:k}=(0,z.dj)(),q=(0,l.J)(),{data:F,isLoading:O,error:$,refetch:P}=(0,S.f)({endpoint:"/api/admin/users?search=".concat(e,"&role=").concat(a,"&status=").concat(J),dependencies:[e,a,J]}),{data:Y,isLoading:D}=(0,S.f)({endpoint:"/api/admin/companies?limit=1000"}),Z=(0,I.mN)({resolver:(0,R.u)(U),defaultValues:{firstName:"",lastName:"",email:"",password:"",role:"recruiter",companyId:""}}),{formState:{isSubmitting:H},handleSubmit:T,watch:W,reset:G}=Z,X=W("role"),K=async e=>{try{await q("/api/admin/users",{method:"POST",body:JSON.stringify(e)}),k({title:"✅ User Created",description:"".concat(e.email," has been created successfully.")}),V(!1),G(),P()}catch(e){k({title:"❌ Error",description:e instanceof Error?e.message:"An unknown error occurred",variant:"destructive"})}},Q=(null==F?void 0:F.users)||[],ee=e=>{switch(e){case"super_admin":return(0,r.jsx)(m.A,{className:"h-4 w-4 text-yellow-600"});case"company_admin":return(0,r.jsx)(h.A,{className:"h-4 w-4 text-blue-600"});case"recruiter":return(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-600"});case"interviewer":return(0,r.jsx)(j.A,{className:"h-4 w-4 text-purple-600"});case"candidate":return(0,r.jsx)(u.A,{className:"h-4 w-4 text-gray-600"});default:return(0,r.jsx)(o.A,{className:"h-4 w-4"})}},es=e=>{switch(e){case"super_admin":return"default";case"company_admin":case"candidate":default:return"secondary";case"recruiter":case"interviewer":return"outline"}},ea=e=>{switch(e){case"active":return(0,r.jsx)(p.A,{className:"h-4 w-4 text-green-600"});case"inactive":return(0,r.jsx)(v.A,{className:"h-4 w-4 text-red-600"});case"pending":return(0,r.jsx)(N.A,{className:"h-4 w-4 text-yellow-600"});default:return(0,r.jsx)(N.A,{className:"h-4 w-4"})}};return(0,r.jsxs)(S.c,{title:"User Management",description:"Manage and monitor all users across the platform.",icon:o.A,isLoading:O,error:$,onRefresh:P,children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"All Users"}),(0,r.jsxs)(_.lG,{open:E,onOpenChange:V,children:[(0,r.jsx)(_.zM,{asChild:!0,children:(0,r.jsxs)(i.$,{children:[(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add User"]})}),(0,r.jsxs)(_.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(_.c7,{children:[(0,r.jsx)(_.L3,{children:"Add New User"}),(0,r.jsx)(_.rr,{children:"Create a new user account and assign them a role."})]}),(0,r.jsx)(B.lV,{...Z,children:(0,r.jsxs)("form",{onSubmit:T(K),className:"space-y-4",children:[(0,r.jsx)(B.zB,{control:Z.control,name:"firstName",render:e=>{let{field:s}=e;return(0,r.jsxs)(B.eI,{children:[(0,r.jsx)(B.lR,{children:"First Name"}),(0,r.jsx)(B.MJ,{children:(0,r.jsx)(c.p,{...s})}),(0,r.jsx)(B.C5,{})]})}}),(0,r.jsx)(B.zB,{control:Z.control,name:"lastName",render:e=>{let{field:s}=e;return(0,r.jsxs)(B.eI,{children:[(0,r.jsx)(B.lR,{children:"Last Name"}),(0,r.jsx)(B.MJ,{children:(0,r.jsx)(c.p,{...s})}),(0,r.jsx)(B.C5,{})]})}}),(0,r.jsx)(B.zB,{control:Z.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(B.eI,{children:[(0,r.jsx)(B.lR,{children:"Email"}),(0,r.jsx)(B.MJ,{children:(0,r.jsx)(c.p,{type:"email",...s})}),(0,r.jsx)(B.C5,{})]})}}),(0,r.jsx)(B.zB,{control:Z.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(B.eI,{children:[(0,r.jsx)(B.lR,{children:"Password"}),(0,r.jsx)(B.MJ,{children:(0,r.jsx)(c.p,{type:"password",...s})}),(0,r.jsx)(B.C5,{})]})}}),(0,r.jsx)(B.zB,{control:Z.control,name:"role",render:e=>{let{field:s}=e;return(0,r.jsxs)(B.eI,{children:[(0,r.jsx)(B.lR,{children:"Role"}),(0,r.jsxs)(x.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,r.jsx)(B.MJ,{children:(0,r.jsx)(x.bq,{children:(0,r.jsx)(x.yv,{})})}),(0,r.jsxs)(x.gC,{children:[(0,r.jsx)(x.eb,{value:"candidate",children:"Candidate"}),(0,r.jsx)(x.eb,{value:"recruiter",children:"Recruiter"}),(0,r.jsx)(x.eb,{value:"interviewer",children:"Interviewer"}),(0,r.jsx)(x.eb,{value:"company_admin",children:"Company Admin"}),(0,r.jsx)(x.eb,{value:"super_admin",children:"Super Admin"})]})]}),(0,r.jsx)(B.C5,{})]})}}),"super_admin"!==X&&"candidate"!==X&&(0,r.jsx)(B.zB,{control:Z.control,name:"companyId",render:e=>{let{field:s}=e;return(0,r.jsxs)(B.eI,{children:[(0,r.jsx)(B.lR,{children:"Company"}),(0,r.jsxs)(x.l6,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(B.MJ,{children:(0,r.jsx)(x.bq,{children:(0,r.jsx)(x.yv,{placeholder:"Select a company"})})}),(0,r.jsx)(x.gC,{children:D?(0,r.jsx)(x.eb,{value:"loading",disabled:!0,children:"Loading..."}):null==Y?void 0:Y.companies.map(e=>(0,r.jsx)(x.eb,{value:e.id,children:e.name},e.id))})]}),(0,r.jsx)(B.C5,{})]})}}),(0,r.jsx)(_.Es,{children:(0,r.jsx)(i.$,{type:"submit",disabled:H,children:H?"Creating...":"Create User"})})]})})]})]})]}),(0,r.jsxs)(t.Zp,{className:"mb-6",children:[(0,r.jsx)(t.aR,{children:(0,r.jsxs)(t.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(f.A,{className:"h-5 w-5"}),"Filter Users"]})}),(0,r.jsx)(t.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"relative md:col-span-1",children:[(0,r.jsx)(w.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(c.p,{placeholder:"Search users...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,r.jsxs)(x.l6,{value:a,onValueChange:L,children:[(0,r.jsx)(x.bq,{children:(0,r.jsx)(x.yv,{placeholder:"Filter by role"})}),(0,r.jsxs)(x.gC,{children:[(0,r.jsx)(x.eb,{value:"all",children:"All Roles"}),(0,r.jsx)(x.eb,{value:"super_admin",children:"Super Admin"}),(0,r.jsx)(x.eb,{value:"company_admin",children:"Company Admin"}),(0,r.jsx)(x.eb,{value:"recruiter",children:"Recruiter"}),(0,r.jsx)(x.eb,{value:"interviewer",children:"Interviewer"}),(0,r.jsx)(x.eb,{value:"candidate",children:"Candidate"})]})]}),(0,r.jsxs)(x.l6,{value:J,onValueChange:M,children:[(0,r.jsx)(x.bq,{children:(0,r.jsx)(x.yv,{placeholder:"Filter by status"})}),(0,r.jsxs)(x.gC,{children:[(0,r.jsx)(x.eb,{value:"all",children:"All Statuses"}),(0,r.jsx)(x.eb,{value:"active",children:"Active"}),(0,r.jsx)(x.eb,{value:"inactive",children:"Inactive"}),(0,r.jsx)(x.eb,{value:"pending",children:"Pending"})]})]})]})})]}),(0,r.jsxs)(t.Zp,{children:[(0,r.jsxs)(t.aR,{children:[(0,r.jsx)(t.ZB,{children:"Users Overview"}),(0,r.jsxs)(t.BT,{children:[Q.length," user",1!==Q.length?"s":""," found"]})]}),(0,r.jsx)(t.Wu,{children:0===Q.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(o.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Users Found"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"No users match your current filters."})]}):(0,r.jsxs)(C.XI,{children:[(0,r.jsx)(C.A0,{children:(0,r.jsxs)(C.Hj,{children:[(0,r.jsx)(C.nd,{children:"User"}),(0,r.jsx)(C.nd,{children:"Role"}),(0,r.jsx)(C.nd,{children:"Status"}),(0,r.jsx)(C.nd,{children:"Company"}),(0,r.jsx)(C.nd,{children:"Joined"}),(0,r.jsx)(C.nd,{children:"Last Login"}),(0,r.jsx)(C.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(C.BF,{children:Q.map(e=>(0,r.jsxs)(C.Hj,{children:[(0,r.jsx)(C.nA,{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.email,e.emailVerified?(0,r.jsx)(p.A,{className:"h-3 w-3 text-green-600"}):(0,r.jsx)(N.A,{className:"h-3 w-3 text-yellow-600"})]})]})}),(0,r.jsx)(C.nA,{children:(0,r.jsxs)(d.E,{variant:es(e.role),className:"flex items-center gap-1 w-fit",children:[ee(e.role),e.role.replace("_"," ")]})}),(0,r.jsx)(C.nA,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[ea(e.status),(0,r.jsx)("span",{className:"capitalize",children:e.status})]})}),(0,r.jsx)(C.nA,{children:e.companyName?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{children:e.companyName})]}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,r.jsx)(C.nA,{children:(0,r.jsx)("span",{className:"text-sm",children:new Date(e.createdAt).toLocaleDateString()})}),(0,r.jsx)(C.nA,{children:e.lastLogin?(0,r.jsx)("span",{className:"text-sm",children:new Date(e.lastLogin).toLocaleDateString()}):(0,r.jsx)("span",{className:"text-muted-foreground text-sm",children:"Never"})}),(0,r.jsx)(C.nA,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(j.A,{className:"h-4 w-4"})}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})}),"active"===e.status?(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"text-orange-600",children:(0,r.jsx)(A.A,{className:"h-4 w-4"})}):(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"text-green-600",children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})}},90342:(e,s,a)=>{Promise.resolve().then(a.bind(a,52899))}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(90342)),_N_E=e.O()}]);