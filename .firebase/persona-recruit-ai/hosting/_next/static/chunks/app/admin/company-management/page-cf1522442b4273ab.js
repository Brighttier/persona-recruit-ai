(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2066],{1124:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>_});var a=n(95155),l=n(12115),i=n(35695),c=n(6874),d=n.n(c),t=n(45043),r=n(30285),o=n(66695),h=n(62523),x=n(26126),m=n(59409),j=n(8376),u=n(76603),p=n(37648),v=n(86950),g=n(75074),N=n(18046),y=n(50172),f=n(50286),b=n(57082),w=n(3561),C=n(17607),A=n(18763),S=n(77223),E=n(44838),F=n(85127),Z=n(54165),J=n(85057);function _(){(0,i.useRouter)();let[e,s]=(0,l.useState)(""),[n,c]=(0,l.useState)("all"),[_,k]=(0,l.useState)(!1),[B,R]=(0,l.useState)(!1),[T,W]=(0,l.useState)({name:"",domain:"",website:"",size:"1-10",industry:"",location:"",description:"",founded:new Date().getFullYear()}),{data:z,isLoading:H,error:O,refetch:P}=(0,t.f)({endpoint:"/api/admin/companies?search=".concat(e,"&status=").concat(n),dependencies:[e,n]}),D=(null==z?void 0:z.companies)||[],I=z?{total:z.pagination.total,active:z.companies.filter(e=>"active"===e.status).length,suspended:z.companies.filter(e=>"suspended"===e.status).length,pending:z.companies.filter(e=>"pending"===e.status).length}:null,$=async()=>{try{R(!0);let e=await fetch("/api/admin/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!e.ok)throw Error((await e.json()).error||"Failed to create company");k(!1),P()}catch(e){console.error("Error creating company:",e)}finally{R(!1)}},L=e=>{switch(e){case"active":return(0,a.jsxs)(x.E,{variant:"default",className:"bg-green-100 text-green-800",children:[(0,a.jsx)(j.A,{className:"mr-1 h-3 w-3"}),"Active"]});case"suspended":return(0,a.jsxs)(x.E,{variant:"destructive",children:[(0,a.jsx)(u.A,{className:"mr-1 h-3 w-3"}),"Suspended"]});case"pending":return(0,a.jsxs)(x.E,{variant:"secondary",children:[(0,a.jsx)(p.A,{className:"mr-1 h-3 w-3"}),"Pending"]});default:return(0,a.jsx)(x.E,{variant:"outline",children:e})}};return(0,a.jsxs)(t.c,{title:"Company Management",description:"Manage company accounts, subscriptions, and monitor business metrics",icon:v.A,isLoading:H,error:O,onRefresh:P,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o.ZB,{className:"text-sm font-medium",children:"Total Companies"}),(0,a.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==I?void 0:I.total)||0})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o.ZB,{className:"text-sm font-medium",children:"Active Companies"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==I?void 0:I.active)||0})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o.ZB,{className:"text-sm font-medium",children:"Suspended"}),(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==I?void 0:I.suspended)||0})})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o.ZB,{className:"text-sm font-medium",children:"Pending Approval"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(o.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==I?void 0:I.pending)||0})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(h.p,{placeholder:"Search companies...",value:e,onChange:e=>s(e.target.value),className:"pl-8"})]}),(0,a.jsxs)(m.l6,{value:n,onValueChange:c,children:[(0,a.jsx)(m.bq,{className:"w-40",children:(0,a.jsx)(m.yv,{placeholder:"Status"})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"all",children:"All Status"}),(0,a.jsx)(m.eb,{value:"active",children:"Active"}),(0,a.jsx)(m.eb,{value:"suspended",children:"Suspended"}),(0,a.jsx)(m.eb,{value:"pending",children:"Pending"})]})]})]}),(0,a.jsxs)(r.$,{onClick:()=>{k(!0)},children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Add Company"]})]}),(0,a.jsxs)(o.Zp,{children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsxs)(o.ZB,{children:["Companies (",D.length,")"]}),(0,a.jsx)(o.BT,{children:"Manage company accounts and subscriptions"})]}),(0,a.jsx)(o.Wu,{children:(0,a.jsxs)(F.XI,{children:[(0,a.jsx)(F.A0,{children:(0,a.jsxs)(F.Hj,{children:[(0,a.jsx)(F.nd,{children:"Company"}),(0,a.jsx)(F.nd,{children:"Status"}),(0,a.jsx)(F.nd,{children:"Users"}),(0,a.jsx)(F.nd,{children:"Active Jobs"}),(0,a.jsx)(F.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(F.BF,{children:H?(0,a.jsx)(F.Hj,{children:(0,a.jsx)(F.nA,{colSpan:5,className:"text-center",children:(0,a.jsx)(y.A,{className:"mx-auto h-6 w-6 animate-spin"})})}):D.map(e=>(0,a.jsxs)(F.Hj,{children:[(0,a.jsx)(F.nA,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.location," â€¢ ",e.industry]})]})}),(0,a.jsx)(F.nA,{children:L(e.status)}),(0,a.jsx)(F.nA,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"mr-1 h-3 w-3 text-muted-foreground"}),e.userCount]})}),(0,a.jsx)(F.nA,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.A,{className:"mr-1 h-3 w-3 text-muted-foreground"}),e.activeJobs]})}),(0,a.jsx)(F.nA,{className:"text-right",children:(0,a.jsxs)(E.rI,{children:[(0,a.jsx)(E.ty,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(E.SQ,{align:"end",children:[(0,a.jsx)(E.lp,{children:"Actions"}),(0,a.jsx)(d(),{href:"/admin/company-management/".concat(e.id),passHref:!0,children:(0,a.jsxs)(E._2,{children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"View Details"]})}),(0,a.jsx)(d(),{href:"/admin/company-management/".concat(e.id,"/edit"),passHref:!0,children:(0,a.jsxs)(E._2,{children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Edit Company"]})}),(0,a.jsx)(E.mB,{}),(0,a.jsxs)(E._2,{className:"text-red-600",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Delete Company"]})]})]})})]},e.id))})]})})]}),(0,a.jsx)(Z.lG,{open:_,onOpenChange:k,children:(0,a.jsxs)(Z.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(Z.c7,{children:[(0,a.jsx)(Z.L3,{children:"Add New Company"}),(0,a.jsx)(Z.rr,{children:"Create a new company account in the system."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J.J,{htmlFor:"name",children:"Company Name *"}),(0,a.jsx)(h.p,{id:"name",value:T.name,onChange:e=>W({...T,name:e.target.value}),placeholder:"Tech Corp Inc."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J.J,{htmlFor:"domain",children:"Domain *"}),(0,a.jsx)(h.p,{id:"domain",value:T.domain,onChange:e=>W({...T,domain:e.target.value}),placeholder:"techcorp.com"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J.J,{htmlFor:"website",children:"Website"}),(0,a.jsx)(h.p,{id:"website",type:"url",value:T.website,onChange:e=>W({...T,website:e.target.value}),placeholder:"https://techcorp.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J.J,{htmlFor:"size",children:"Company Size *"}),(0,a.jsxs)(m.l6,{value:T.size,onValueChange:e=>W({...T,size:e}),children:[(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"1-10",children:"1-10 employees"}),(0,a.jsx)(m.eb,{value:"11-50",children:"11-50 employees"}),(0,a.jsx)(m.eb,{value:"51-200",children:"51-200 employees"}),(0,a.jsx)(m.eb,{value:"201-1000",children:"201-1000 employees"}),(0,a.jsx)(m.eb,{value:"1000+",children:"1000+ employees"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J.J,{htmlFor:"industry",children:"Industry *"}),(0,a.jsx)(h.p,{id:"industry",value:T.industry,onChange:e=>W({...T,industry:e.target.value}),placeholder:"Technology"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(J.J,{htmlFor:"location",children:"Location *"}),(0,a.jsx)(h.p,{id:"location",value:T.location,onChange:e=>W({...T,location:e.target.value}),placeholder:"San Francisco, CA"})]})]})]}),(0,a.jsxs)(Z.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>k(!1),disabled:B,children:"Cancel"}),(0,a.jsx)(r.$,{onClick:$,disabled:B||!T.name||!T.domain||!T.industry||!T.location,children:B?"Creating...":"Create Company"})]})]})})]})}},67161:(e,s,n)=>{Promise.resolve().then(n.bind(n,1124))}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(67161)),_N_E=e.O()}]);