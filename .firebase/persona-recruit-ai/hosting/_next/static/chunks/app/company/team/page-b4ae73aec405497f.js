(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5398],{32725:(e,i,s)=>{Promise.resolve().then(s.bind(s,81648))},81648:(e,i,s)=>{"use strict";s.r(i),s.d(i,{default:()=>B});var n=s(95155),t=s(12115),a=s(62177),r=s(90221),l=s(71153),c=s(30285),d=s(66695),o=s(62523),m=s(17759),h=s(59409),x=s(26126),j=s(54165),u=s(85127),v=s(17313),p=s(87481),N=s(54913),g=s(50286),f=s(17607),w=s(45731),A=s(13896),y=s(73672),b=s(19637),S=s(3561),C=s(37648),I=s(8376),k=s(24371),L=s(15599),T=s(18477),E=s(13563);let M=l.Ik({email:l.Yj().email("Please enter a valid email address"),role:l.k5(["recruiter","interviewer"]),firstName:l.Yj().min(2,"First name must be at least 2 characters"),lastName:l.Yj().min(2,"Last name must be at least 2 characters"),department:l.Yj().optional()}),R=[{id:"1",email:"admin@techcorp.com",firstName:"Jane",lastName:"Admin",role:"company_admin",department:"Administration",status:"Active",lastLogin:"2024-06-23T10:30:00Z",joinedAt:"2024-01-15T08:00:00Z"},{id:"2",email:"recruiter@techcorp.com",firstName:"John",lastName:"Smith",role:"recruiter",department:"HR",status:"Active",lastLogin:"2024-06-22T16:45:00Z",joinedAt:"2024-02-01T09:00:00Z"},{id:"3",email:"interviewer@techcorp.com",firstName:"Mike",lastName:"Wilson",role:"interviewer",department:"Engineering",status:"Active",lastLogin:"2024-06-21T14:20:00Z",joinedAt:"2024-03-10T10:30:00Z"}];function B(){let[e,i]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[B,F]=(0,t.useState)(!1),[P,Z]=(0,t.useState)(!1),[_,J]=(0,t.useState)(!0),{toast:z}=(0,p.dj)();(0,t.useEffect)(()=>{D()},[]);let D=async()=>{try{let e=await fetch("/api/company/invite");if(e.ok){let i=await e.json();l(i.data.invitations||[])}i(R)}catch(e){console.error("Failed to fetch team data:",e),z({title:"Error",description:"Failed to load team data. Please refresh the page.",variant:"destructive"})}finally{J(!1)}},H=(0,a.mN)({resolver:(0,r.u)(M),defaultValues:{email:"",role:"recruiter",firstName:"",lastName:"",department:""}}),O=async e=>{try{Z(!0);let i=await fetch("/api/company/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to send invitation")}let s=await i.json();s.data.invitation.id,s.data.invitation.email,s.data.invitation.firstName,s.data.invitation.lastName,s.data.invitation.role,s.data.invitation.department,s.data.invitation.status,s.data.invitation.invitedAt,s.data.invitation.expiresAt,s.data.invitation.invitationLink,await D(),F(!1),H.reset(),z({title:"âœ… Invitation Sent",description:"Team member invitation sent to ".concat(e.email)})}catch(e){z({title:"Invitation Failed",description:e instanceof Error?e.message:"Failed to send invitation. Please try again.",variant:"destructive"})}finally{Z(!1)}},V=e=>{navigator.clipboard.writeText(window.location.origin+e),z({title:"Link Copied",description:"Invitation link copied to clipboard"})},$=e=>{switch(e){case"company_admin":return(0,n.jsx)(N.A,{className:"h-4 w-4"});case"recruiter":return(0,n.jsx)(g.A,{className:"h-4 w-4"});case"interviewer":return(0,n.jsx)(f.A,{className:"h-4 w-4"});default:return(0,n.jsx)(w.A,{className:"h-4 w-4"})}},X=e=>{switch(e){case"company_admin":return"default";case"recruiter":default:return"secondary";case"interviewer":return"outline"}},Y=e=>{switch(e){case"Active":case"Accepted":return"default";case"Pending":default:return"secondary";case"Expired":return"destructive"}};return(0,n.jsx)(T.N,{children:(0,n.jsxs)(E.m,{className:"py-6",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[(0,n.jsx)(g.A,{className:"h-8 w-8 text-primary"}),"Team Management"]}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage your company's team members and send invitations to new recruiters and interviewers."})]}),(0,n.jsxs)(v.tU,{defaultValue:"members",className:"space-y-6",children:[(0,n.jsxs)(v.j7,{className:"grid w-full grid-cols-2",children:[(0,n.jsxs)(v.Xi,{value:"members",children:["Team Members (",e.length,")"]}),(0,n.jsxs)(v.Xi,{value:"invitations",children:["Pending Invitations (",s.filter(e=>"Pending"===e.status).length,")"]})]}),(0,n.jsx)(v.av,{value:"members",children:(0,n.jsxs)(d.Zp,{children:[(0,n.jsx)(d.aR,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(g.A,{className:"h-5 w-5"}),"Team Members"]}),(0,n.jsx)(d.BT,{children:"Current active team members in your company"})]}),(0,n.jsxs)(j.lG,{open:B,onOpenChange:F,children:[(0,n.jsx)(j.zM,{asChild:!0,children:(0,n.jsxs)(c.$,{children:[(0,n.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Invite Team Member"]})}),(0,n.jsxs)(j.Cf,{children:[(0,n.jsxs)(j.c7,{children:[(0,n.jsx)(j.L3,{children:"Invite Team Member"}),(0,n.jsx)(j.rr,{children:"Send an invitation to a new recruiter or interviewer to join your team."})]}),(0,n.jsx)(m.lV,{...H,children:(0,n.jsxs)("form",{onSubmit:H.handleSubmit(O),className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(m.zB,{control:H.control,name:"firstName",render:e=>{let{field:i}=e;return(0,n.jsxs)(m.eI,{children:[(0,n.jsx)(m.lR,{children:"First Name"}),(0,n.jsx)(m.MJ,{children:(0,n.jsx)(o.p,{placeholder:"John",...i})}),(0,n.jsx)(m.C5,{})]})}}),(0,n.jsx)(m.zB,{control:H.control,name:"lastName",render:e=>{let{field:i}=e;return(0,n.jsxs)(m.eI,{children:[(0,n.jsx)(m.lR,{children:"Last Name"}),(0,n.jsx)(m.MJ,{children:(0,n.jsx)(o.p,{placeholder:"Smith",...i})}),(0,n.jsx)(m.C5,{})]})}})]}),(0,n.jsx)(m.zB,{control:H.control,name:"email",render:e=>{let{field:i}=e;return(0,n.jsxs)(m.eI,{children:[(0,n.jsx)(m.lR,{children:"Email Address"}),(0,n.jsx)(m.MJ,{children:(0,n.jsx)(o.p,{placeholder:"john.smith@company.com",...i})}),(0,n.jsx)(m.C5,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(m.zB,{control:H.control,name:"role",render:e=>{let{field:i}=e;return(0,n.jsxs)(m.eI,{children:[(0,n.jsx)(m.lR,{children:"Role"}),(0,n.jsxs)(h.l6,{onValueChange:i.onChange,defaultValue:i.value,children:[(0,n.jsx)(m.MJ,{children:(0,n.jsx)(h.bq,{children:(0,n.jsx)(h.yv,{placeholder:"Select role"})})}),(0,n.jsxs)(h.gC,{children:[(0,n.jsx)(h.eb,{value:"recruiter",children:"Recruiter"}),(0,n.jsx)(h.eb,{value:"interviewer",children:"Interviewer"})]})]}),(0,n.jsx)(m.C5,{})]})}}),(0,n.jsx)(m.zB,{control:H.control,name:"department",render:e=>{let{field:i}=e;return(0,n.jsxs)(m.eI,{children:[(0,n.jsx)(m.lR,{children:"Department (Optional)"}),(0,n.jsx)(m.MJ,{children:(0,n.jsx)(o.p,{placeholder:"e.g., HR, Engineering",...i})}),(0,n.jsx)(m.C5,{})]})}})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)(c.$,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancel"}),(0,n.jsx)(c.$,{type:"submit",disabled:P,children:P?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.A,{className:"h-4 w-4 mr-2 animate-pulse"}),"Sending..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]})})]})]})]})}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)(u.XI,{children:[(0,n.jsx)(u.A0,{children:(0,n.jsxs)(u.Hj,{children:[(0,n.jsx)(u.nd,{children:"Member"}),(0,n.jsx)(u.nd,{children:"Role"}),(0,n.jsx)(u.nd,{children:"Department"}),(0,n.jsx)(u.nd,{children:"Status"}),(0,n.jsx)(u.nd,{children:"Last Login"}),(0,n.jsx)(u.nd,{children:"Actions"})]})}),(0,n.jsx)(u.BF,{children:e.map(e=>(0,n.jsxs)(u.Hj,{children:[(0,n.jsx)(u.nA,{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]})}),(0,n.jsx)(u.nA,{children:(0,n.jsxs)(x.E,{variant:X(e.role),className:"flex items-center gap-1 w-fit",children:[$(e.role),e.role.replace("_"," ")]})}),(0,n.jsx)(u.nA,{children:e.department||"-"}),(0,n.jsx)(u.nA,{children:(0,n.jsx)(x.E,{variant:Y(e.status),children:e.status})}),(0,n.jsx)(u.nA,{children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"}),(0,n.jsx)(u.nA,{children:(0,n.jsx)(c.$,{variant:"ghost",size:"sm",children:(0,n.jsx)(S.A,{className:"h-4 w-4"})})})]},e.id))})]})})]})}),(0,n.jsx)(v.av,{value:"invitations",children:(0,n.jsxs)(d.Zp,{children:[(0,n.jsxs)(d.aR,{children:[(0,n.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(b.A,{className:"h-5 w-5"}),"Pending Invitations"]}),(0,n.jsx)(d.BT,{children:"Track and manage sent invitations"})]}),(0,n.jsx)(d.Wu,{children:(0,n.jsxs)(u.XI,{children:[(0,n.jsx)(u.A0,{children:(0,n.jsxs)(u.Hj,{children:[(0,n.jsx)(u.nd,{children:"Invitee"}),(0,n.jsx)(u.nd,{children:"Role"}),(0,n.jsx)(u.nd,{children:"Status"}),(0,n.jsx)(u.nd,{children:"Invited"}),(0,n.jsx)(u.nd,{children:"Expires"}),(0,n.jsx)(u.nd,{children:"Actions"})]})}),(0,n.jsx)(u.BF,{children:s.map(e=>(0,n.jsxs)(u.Hj,{children:[(0,n.jsx)(u.nA,{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]})}),(0,n.jsx)(u.nA,{children:(0,n.jsxs)(x.E,{variant:X(e.role),className:"flex items-center gap-1 w-fit",children:[$(e.role),e.role]})}),(0,n.jsx)(u.nA,{children:(0,n.jsxs)(x.E,{variant:Y(e.status),children:["Pending"===e.status&&(0,n.jsx)(C.A,{className:"h-3 w-3 mr-1"}),"Accepted"===e.status&&(0,n.jsx)(I.A,{className:"h-3 w-3 mr-1"}),"Expired"===e.status&&(0,n.jsx)(k.A,{className:"h-3 w-3 mr-1"}),e.status]})}),(0,n.jsx)(u.nA,{children:new Date(e.invitedAt).toLocaleDateString()}),(0,n.jsx)(u.nA,{children:new Date(e.expiresAt).toLocaleDateString()}),(0,n.jsx)(u.nA,{children:"Pending"===e.status&&e.invitationLink&&(0,n.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>V(e.invitationLink),children:[(0,n.jsx)(L.A,{className:"h-4 w-4 mr-1"}),"Copy Link"]})})]},e.id))})]})})]})})]})]})})}}},e=>{var i=i=>e(e.s=i);e.O(0,[4121,2076,7358],()=>i(32725)),_N_E=e.O()}]);