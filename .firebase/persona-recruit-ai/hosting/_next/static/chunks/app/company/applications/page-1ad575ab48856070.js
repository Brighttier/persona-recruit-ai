(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7404],{34150:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>R});var l=a(95155),i=a(12115),t=a(35695),n=a(66695),r=a(30285),c=a(62523),d=a(26126),h=a(17313),x=a(59409),o=a(47262),m=a(55365),j=a(50172),u=a(50286),p=a(8376),v=a(24371),g=a(11133),w=a(9572),N=a(75074),b=a(57082),f=a(83662),y=a(30462),A=a(68718),S=a(13300),C=a(17607),k=a(98328);let _={pending:"bg-yellow-100 text-yellow-800",under_review:"bg-blue-100 text-blue-800",interview_scheduled:"bg-purple-100 text-purple-800",interviewed:"bg-indigo-100 text-indigo-800",hired:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},I={pending:"Pending Review",under_review:"Under Review",interview_scheduled:"Interview Scheduled",interviewed:"Interviewed",hired:"Hired",rejected:"Rejected"};function R(){let[e,s]=(0,i.useState)([]),[a,R]=(0,i.useState)([]),[E,T]=(0,i.useState)([]),[U,L]=(0,i.useState)(!0),[D,F]=(0,i.useState)(null),[P,V]=(0,i.useState)({status:"all",job:"all",department:"all",minScore:0,search:""}),[$,O]=(0,i.useState)([]),[X,q]=(0,i.useState)([]),[z,H]=(0,i.useState)("all"),J=(0,t.useRouter)();(0,i.useEffect)(()=>{M(),Z()},[]),(0,i.useEffect)(()=>{W()},[e,P,z]);let M=async()=>{try{let e=await fetch("/api/company/applications");if(e.ok){let a=await e.json();s(a.applications);let l=[...new Set(a.applications.map(e=>e.department))];q(l)}else F("Failed to load applications")}catch(e){F("An error occurred while loading applications")}finally{L(!1)}},Z=async()=>{try{let e=await fetch("/api/jobs");if(e.ok){let s=await e.json();O(s.jobs||[])}}catch(e){console.error("Failed to fetch jobs:",e)}},W=()=>{let s=e;if("all"!==z&&(s=s.filter(e=>e.status===z)),"all"!==P.status&&(s=s.filter(e=>e.status===P.status)),"all"!==P.job&&(s=s.filter(e=>e.jobId===P.job)),"all"!==P.department&&(s=s.filter(e=>e.department===P.department)),P.minScore>0&&(s=s.filter(e=>e.aiMatchScore>=P.minScore)),P.search){let e=P.search.toLowerCase();s=s.filter(s=>s.candidateName.toLowerCase().includes(e)||s.candidateEmail.toLowerCase().includes(e)||s.jobTitle.toLowerCase().includes(e)||s.skills.some(s=>s.toLowerCase().includes(e)))}s.sort((e,s)=>new Date(s.appliedAt).getTime()-new Date(e.appliedAt).getTime()),R(s)},B=async e=>{if(0!==E.length)try{(await fetch("/api/company/applications/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationIds:E,action:e})})).ok?(await M(),T([])):F("Failed to perform bulk action")}catch(e){F("An error occurred during bulk action")}},G=async(e,a)=>{try{(await fetch("/api/company/applications/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})})).ok?s(s=>s.map(s=>s.id===e?{...s,status:a,lastUpdated:new Date().toISOString()}:s)):F("Failed to update application status")}catch(e){F("An error occurred while updating status")}},K=(e,s,a)=>{J.push("/company/interviews/schedule?applicationId=".concat(e,"&candidateId=").concat(s,"&jobId=").concat(a))};if(U)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(j.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,l.jsx)("p",{children:"Loading applications..."})]})});let Q={all:e.length,pending:e.filter(e=>"pending"===e.status).length,under_review:e.filter(e=>"under_review"===e.status).length,interview_scheduled:e.filter(e=>"interview_scheduled"===e.status).length,interviewed:e.filter(e=>"interviewed"===e.status).length};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("div",{className:"bg-white shadow",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,l.jsx)(u.A,{className:"h-6 w-6"}),"Application Management"]}),(0,l.jsx)("p",{className:"text-gray-600",children:"Review and manage candidate applications"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(r.$,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh"}),E.length>0&&(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(r.$,{variant:"outline",onClick:()=>B("approve"),className:"text-green-600",children:[(0,l.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Approve (",E.length,")"]}),(0,l.jsxs)(r.$,{variant:"outline",onClick:()=>B("reject"),className:"text-red-600",children:[(0,l.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Reject (",E.length,")"]})]})]})]})})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[D&&(0,l.jsxs)(m.Fc,{variant:"destructive",className:"mb-6",children:[(0,l.jsx)(g.A,{className:"h-4 w-4"}),(0,l.jsx)(m.TN,{children:D})]}),(0,l.jsxs)(n.Zp,{className:"mb-6",children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(w.A,{className:"h-5 w-5"}),"Filters"]})}),(0,l.jsx)(n.Wu,{children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(N.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,l.jsx)(c.p,{placeholder:"Search candidates, jobs, skills...",value:P.search,onChange:e=>V({...P,search:e.target.value}),className:"pl-10"})]})}),(0,l.jsxs)(x.l6,{value:P.job,onValueChange:e=>V({...P,job:e}),children:[(0,l.jsx)(x.bq,{children:(0,l.jsx)(x.yv,{placeholder:"All Jobs"})}),(0,l.jsxs)(x.gC,{children:[(0,l.jsx)(x.eb,{value:"all",children:"All Jobs"}),$.map(e=>(0,l.jsx)(x.eb,{value:e.id,children:e.title},e.id))]})]}),(0,l.jsxs)(x.l6,{value:P.department,onValueChange:e=>V({...P,department:e}),children:[(0,l.jsx)(x.bq,{children:(0,l.jsx)(x.yv,{placeholder:"All Departments"})}),(0,l.jsxs)(x.gC,{children:[(0,l.jsx)(x.eb,{value:"all",children:"All Departments"}),X.map(e=>(0,l.jsx)(x.eb,{value:e,children:e},e))]})]}),(0,l.jsxs)(x.l6,{value:P.status,onValueChange:e=>V({...P,status:e}),children:[(0,l.jsx)(x.bq,{children:(0,l.jsx)(x.yv,{placeholder:"All Statuses"})}),(0,l.jsxs)(x.gC,{children:[(0,l.jsx)(x.eb,{value:"all",children:"All Statuses"}),(0,l.jsx)(x.eb,{value:"pending",children:"Pending"}),(0,l.jsx)(x.eb,{value:"under_review",children:"Under Review"}),(0,l.jsx)(x.eb,{value:"interview_scheduled",children:"Interview Scheduled"}),(0,l.jsx)(x.eb,{value:"interviewed",children:"Interviewed"}),(0,l.jsx)(x.eb,{value:"hired",children:"Hired"}),(0,l.jsx)(x.eb,{value:"rejected",children:"Rejected"})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(c.p,{type:"number",placeholder:"Min AI Score",value:P.minScore||"",onChange:e=>V({...P,minScore:parseInt(e.target.value)||0}),min:"0",max:"100"})})]})})]}),(0,l.jsxs)(h.tU,{value:z,onValueChange:H,className:"space-y-6",children:[(0,l.jsxs)(h.j7,{className:"grid w-full grid-cols-5",children:[(0,l.jsxs)(h.Xi,{value:"all",children:["All (",Q.all,")"]}),(0,l.jsxs)(h.Xi,{value:"pending",children:["Pending (",Q.pending,")"]}),(0,l.jsxs)(h.Xi,{value:"under_review",children:["Under Review (",Q.under_review,")"]}),(0,l.jsxs)(h.Xi,{value:"interview_scheduled",children:["Scheduled (",Q.interview_scheduled,")"]}),(0,l.jsxs)(h.Xi,{value:"interviewed",children:["Interviewed (",Q.interviewed,")"]})]}),(0,l.jsx)(h.av,{value:z,children:0===a.length?(0,l.jsx)(n.Zp,{children:(0,l.jsxs)(n.Wu,{className:"text-center py-12",children:[(0,l.jsx)(u.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Applications Found"}),(0,l.jsx)("p",{className:"text-gray-600",children:0===e.length?"No applications have been submitted yet.":"No applications match your current filters."})]})}):(0,l.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,l.jsx)(n.Zp,{className:"hover:shadow-md transition-shadow",children:(0,l.jsx)(n.Wu,{className:"p-6",children:(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,l.jsx)(o.S,{checked:E.includes(e.id),onCheckedChange:s=>{s?T([...E,e.id]):T(E.filter(s=>s!==e.id))}}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.candidateName}),(0,l.jsx)("p",{className:"text-gray-600",children:e.candidateEmail}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(b.A,{className:"h-4 w-4"}),e.currentTitle]}),e.candidateLocation&&(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(f.A,{className:"h-4 w-4"}),e.candidateLocation]})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(d.E,{className:_[e.status],children:I[e.status]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(y.A,{className:"h-4 w-4 text-yellow-500"}),(0,l.jsxs)("span",{className:"font-semibold",children:[e.aiMatchScore,"%"]})]})]}),(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Applied ",new Date(e.appliedAt).toLocaleDateString()]})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(b.A,{className:"h-4 w-4 text-gray-400"}),(0,l.jsx)("span",{className:"font-medium",children:e.jobTitle}),(0,l.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,l.jsx)("span",{className:"text-gray-600",children:e.department})]}),e.skills.length>0&&(0,l.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.skills.slice(0,5).map((e,s)=>(0,l.jsx)(d.E,{variant:"outline",className:"text-xs",children:e},s)),e.skills.length>5&&(0,l.jsxs)(d.E,{variant:"outline",className:"text-xs",children:["+",e.skills.length-5," more"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[e.resumeUrl&&(0,l.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>window.open(e.resumeUrl,"_blank"),children:[(0,l.jsx)(A.A,{className:"h-4 w-4 mr-1"}),"Resume"]}),e.videoIntroUrl&&(0,l.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>window.open(e.videoIntroUrl,"_blank"),children:[(0,l.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"Video Intro"]}),(0,l.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>J.push("/company/applications/".concat(e.id)),children:[(0,l.jsx)(C.A,{className:"h-4 w-4 mr-1"}),"View Details"]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:["under_review"===e.status&&(0,l.jsxs)(r.$,{size:"sm",onClick:()=>K(e.id,e.candidateId,e.jobId),children:[(0,l.jsx)(k.A,{className:"h-4 w-4 mr-1"}),"Schedule Interview"]}),(0,l.jsxs)(x.l6,{value:e.status,onValueChange:s=>G(e.id,s),children:[(0,l.jsx)(x.bq,{className:"w-40",children:(0,l.jsx)(x.yv,{})}),(0,l.jsxs)(x.gC,{children:[(0,l.jsx)(x.eb,{value:"pending",children:"Pending"}),(0,l.jsx)(x.eb,{value:"under_review",children:"Under Review"}),(0,l.jsx)(x.eb,{value:"interview_scheduled",children:"Interview Scheduled"}),(0,l.jsx)(x.eb,{value:"interviewed",children:"Interviewed"}),(0,l.jsx)(x.eb,{value:"hired",children:"Hired"}),(0,l.jsx)(x.eb,{value:"rejected",children:"Rejected"})]})]})]})]})]})]})})})},e.id))})})]})]})]})}},88303:(e,s,a)=>{Promise.resolve().then(a.bind(a,34150))}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(88303)),_N_E=e.O()}]);