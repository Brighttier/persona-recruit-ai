(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3418],{40923:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>B});var t=l(95155),a=l(12115),r=l(40283),i=l(18477),n=l(13563),c=l(66695),d=l(30285),x=l(26126),o=l(62523),h=l(59409),j=l(85127),m=l(17313),u=l(57082),f=l(50286),p=l(17607),v=l(8376),b=l(18046),N=l(67554),w=l(68718),g=l(75074),A=l(83662),y=l(18763),C=l(15599),S=l(70033),E=l(6874),Z=l.n(E);function B(){let{getToken:e,loading:s}=(0,r.A)(),[l,E]=(0,a.useState)([]),[B,D]=(0,a.useState)([]),[J,k]=(0,a.useState)(null),[T,$]=(0,a.useState)(!0),[z,L]=(0,a.useState)(""),[R,V]=(0,a.useState)("all"),[W,_]=(0,a.useState)("all"),P=(0,a.useCallback)(async()=>{if(!s){$(!0);try{let s=await e();if(!s){console.error("No auth token found"),$(!1);return}let l=await fetch("/api/recruiter/jobs",{headers:{Authorization:"Bearer ".concat(s)}});if(l.ok){let e=await l.json();E(e.data.jobs||[]),k(e.data.stats||null)}}catch(e){console.error("Error fetching jobs:",e)}finally{$(!1)}}},[e,s]);(0,a.useEffect)(()=>{P()},[P]),(0,a.useEffect)(()=>{let e=l;z&&(e=e.filter(e=>e.title.toLowerCase().includes(z.toLowerCase())||e.department.toLowerCase().includes(z.toLowerCase())||e.location.toLowerCase().includes(z.toLowerCase()))),"all"!==R&&(e=e.filter(e=>e.status===R)),"all"!==W&&(e=e.filter(e=>e.department===W)),D(e)},[l,z,R,W]);let H=e=>{switch(e){case"active":return(0,t.jsx)(x.E,{className:"bg-green-100 text-green-800",children:"Active"});case"paused":return(0,t.jsx)(x.E,{className:"bg-yellow-100 text-yellow-800",children:"Paused"});case"closed":return(0,t.jsx)(x.E,{variant:"destructive",children:"Closed"});case"draft":return(0,t.jsx)(x.E,{variant:"secondary",children:"Draft"});default:return(0,t.jsx)(x.E,{variant:"outline",children:e})}},X=async(e,s)=>{try{E(l=>l.map(l=>l.id===e?{...l,status:s}:l))}catch(e){console.error("Error updating job status:",e)}},q=async e=>{try{let s=l.find(s=>s.id===e);if(s){let t={...s,id:"".concat(e,"_copy"),title:"".concat(s.title," (Copy)"),status:"draft",applications:0,views:0,hires:0,postedAt:new Date().toISOString()};E([t,...l])}}catch(e){console.error("Error duplicating job:",e)}},M=Array.from(new Set(l.map(e=>e.department)));return(0,t.jsx)(i.N,{children:(0,t.jsxs)(n.m,{className:"py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-foreground flex items-center",children:[(0,t.jsx)(u.A,{className:"mr-3 h-8 w-8 text-primary"}),"Job Management"]}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your job postings and track their performance"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Total Jobs"}),(0,t.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==J?void 0:J.total)||0}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==J?void 0:J.active)||0," active, ",(null==J?void 0:J.paused)||0," paused"]})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Total Applications"}),(0,t.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==J?void 0:J.totalApplications)||0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all jobs"})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Total Views"}),(0,t.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==J?void 0:J.totalViews)||0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Job page views"})]})]}),(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(c.ZB,{className:"text-sm font-medium",children:"Total Hires"}),(0,t.jsx)(v.A,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==J?void 0:J.totalHires)||0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Successful placements"})]})]})]}),(0,t.jsxs)(m.tU,{defaultValue:"all-jobs",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(m.j7,{children:[(0,t.jsxs)(m.Xi,{value:"all-jobs",children:["All Jobs (",(null==J?void 0:J.total)||0,")"]}),(0,t.jsxs)(m.Xi,{value:"active",children:["Active (",(null==J?void 0:J.active)||0,")"]}),(0,t.jsxs)(m.Xi,{value:"drafts",children:["Drafts (",(null==J?void 0:J.draft)||0,")"]})]}),(0,t.jsx)(Z(),{href:"/jobs/new",children:(0,t.jsxs)(d.$,{children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Post New Job"]})})]}),(0,t.jsx)(m.av,{value:"all-jobs",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsx)(c.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.ZB,{children:"Job Listings"}),(0,t.jsx)(c.BT,{children:"Manage and track your job postings"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(d.$,{variant:"outline",size:"sm",onClick:P,children:[(0,t.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,t.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),(0,t.jsxs)(c.Wu,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(o.p,{placeholder:"Search jobs...",value:z,onChange:e=>L(e.target.value),className:"w-64"})]}),(0,t.jsxs)(h.l6,{value:R,onValueChange:V,children:[(0,t.jsx)(h.bq,{className:"w-40",children:(0,t.jsx)(h.yv,{placeholder:"All Status"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"all",children:"All Status"}),(0,t.jsx)(h.eb,{value:"active",children:"Active"}),(0,t.jsx)(h.eb,{value:"paused",children:"Paused"}),(0,t.jsx)(h.eb,{value:"closed",children:"Closed"}),(0,t.jsx)(h.eb,{value:"draft",children:"Draft"})]})]}),(0,t.jsxs)(h.l6,{value:W,onValueChange:_,children:[(0,t.jsx)(h.bq,{className:"w-48",children:(0,t.jsx)(h.yv,{placeholder:"All Departments"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"all",children:"All Departments"}),M.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))]})]})]}),(0,t.jsxs)(j.XI,{children:[(0,t.jsx)(j.A0,{children:(0,t.jsxs)(j.Hj,{children:[(0,t.jsx)(j.nd,{children:"Job Title"}),(0,t.jsx)(j.nd,{children:"Department"}),(0,t.jsx)(j.nd,{children:"Location"}),(0,t.jsx)(j.nd,{children:"Status"}),(0,t.jsx)(j.nd,{children:"Applications"}),(0,t.jsx)(j.nd,{children:"Views"}),(0,t.jsx)(j.nd,{children:"Posted"}),(0,t.jsx)(j.nd,{children:"Actions"})]})}),(0,t.jsx)(j.BF,{children:B.map(e=>(0,t.jsxs)(j.Hj,{children:[(0,t.jsx)(j.nA,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.title}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.employmentType})]})}),(0,t.jsx)(j.nA,{children:e.department}),(0,t.jsx)(j.nA,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(A.A,{className:"h-3 w-3 mr-1 text-muted-foreground"}),e.location]})}),(0,t.jsx)(j.nA,{children:H(e.status)}),(0,t.jsx)(j.nA,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f.A,{className:"h-3 w-3 mr-1 text-muted-foreground"}),e.applications]})}),(0,t.jsx)(j.nA,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(p.A,{className:"h-3 w-3 mr-1 text-muted-foreground"}),e.views]})}),(0,t.jsx)(j.nA,{children:new Date(e.postedAt).toLocaleDateString()}),(0,t.jsx)(j.nA,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Z(),{href:"/jobs/".concat(e.id),children:(0,t.jsx)(d.$,{variant:"ghost",size:"sm",children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})}),(0,t.jsx)(Z(),{href:"/jobs/".concat(e.id,"/edit"),children:(0,t.jsx)(d.$,{variant:"ghost",size:"sm",children:(0,t.jsx)(y.A,{className:"h-4 w-4"})})}),(0,t.jsx)(d.$,{variant:"ghost",size:"sm",onClick:()=>q(e.id),children:(0,t.jsx)(C.A,{className:"h-4 w-4"})}),(0,t.jsxs)(h.l6,{onValueChange:s=>X(e.id,s),children:[(0,t.jsx)(h.bq,{className:"w-28 h-8",children:(0,t.jsx)(h.yv,{placeholder:"Status"})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"active",children:"Active"}),(0,t.jsx)(h.eb,{value:"paused",children:"Paused"}),(0,t.jsx)(h.eb,{value:"closed",children:"Closed"}),(0,t.jsx)(h.eb,{value:"draft",children:"Draft"})]})]})]})})]},e.id))})]})]})]})}),(0,t.jsx)(m.av,{value:"active",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Active Jobs"}),(0,t.jsx)(c.BT,{children:"Currently published and accepting applications"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:B.filter(e=>"active"===e.status).map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.department," • ",e.location," • ",e.employmentType]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.applications," applications • ",e.views," views"]})]})})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Z(),{href:"/recruiter/applications?job=".concat(e.id),children:(0,t.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-1"}),"View Applications"]})}),(0,t.jsx)(Z(),{href:"/jobs/".concat(e.id,"/edit"),children:(0,t.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-1"}),"Edit"]})}),(0,t.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"Share"]})]})]},e.id))})})]})}),(0,t.jsx)(m.av,{value:"drafts",children:(0,t.jsxs)(c.Zp,{children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsx)(c.ZB,{children:"Draft Jobs"}),(0,t.jsx)(c.BT,{children:"Jobs that haven't been published yet"})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u.A,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Draft Jobs"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"You don't have any draft jobs at the moment."}),(0,t.jsx)(Z(),{href:"/jobs/new",children:(0,t.jsxs)(d.$,{children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Create New Job"]})})]})})]})})]})]})})}},88984:(e,s,l)=>{Promise.resolve().then(l.bind(l,40923))}},e=>{var s=s=>e(e.s=s);e.O(0,[4121,2076,7358],()=>s(88984)),_N_E=e.O()}]);